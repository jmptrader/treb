
/**
 * tab bar falls under .treb-main, which is a flex column layout.
 */

.treb-main {

  /* flex patch for chrome */

  .treb-tab-bar-container {

    /* 
     * NOTE: this is becoming flex/row/space-between so that RiskAMP web 
     * can insert a node in there. not sure that this is a useful long-term
     * way to handle this, but it's acceptable for now.
     *
     * NOTE: that causes some safari layout issues. I think this is related
     * to flex layout and calculated size (as usual). 
     *
     * Issue 1 is compressing the tab bar. that seems to be resolved by
     * setting treb-tab-bar height to 100%.
     *
     * Issue 2 is that the size changes when adding/removing tabs. it seems
     * like some pixels get shifted off screen.
     * 
     * Can we just solve this a different way for RAW, and leave tabs alone?
     * (...)
     */ 

     /*
    display: flex;
    flex-direction: row;
    justify-content: space-between;
     */

    order: 3;

    & .treb-tab-bar {
      display: flex;
      flex-direction: row;
      z-index: 1;
      max-width: 100%;
    }

    /* tabs should be under tab bar? (...) */

    & .tab, & .add-tab { /* , & .delete-tab { */

      font-size: inherit;
      padding: .25em .75em;
      cursor: default;
      display: inline-block;
      display: inline-flex;

      border-bottom-left-radius: 5px;
      border-bottom-right-radius: 5px;
      border: 1px solid #ccc;
      border-top-width: 0px;
      z-index: 1;
      margin-right: -2px;

    }

    & .treb-scale-control-2 {
      font-size: inherit;
      // padding: .25em .75em;
      padding: .25em ;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      position: relative;
      width: 5em;

      & .treb-scale-input {
        font-size: inherit;
        font-family: inherit;
        width: 4em;
        text-align: center;
        border: 1px solid #ccc;
        border-radius: 2px;
        color: inherit;
      }

      & .treb-slider-container {
        position: absolute;
        border: 1px solid #ccc;
        background: #fff;
        width: 10em;
        height: 4em;
        top: 0em;
        left: .5em;
        transform-origin: left top;
        transform: rotate(-90deg);
        z-index: $z-index-scale-popup;
        opacity: 0;
        transition: opacity .25s ease;
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        pointer-events: none;
      }

      & .treb-scale-input:focus + .treb-slider-container,
      & .treb-slider-container:focus-within,
      &:hover .treb-slider-container {
        opacity: .85;
        pointer-events: initial;
      }

    }

    & .treb-scale-control {
      font-size: inherit;
      padding: .25em .75em;
      padding: .25em 1em;
      display: flex;
      flex-direction: row;
      align-items: center;

      /*
      opacity: .75;
      transition: opacity .15s ease;
      &:hover {
        opacity: 1;
      }
      */

      & > div {
        pointer-events: none;
        min-width: 3.25em;
        text-align: center;
      }

      & button {
        font-size: inherit;
        border-radius: 2px;
        width: 1em;
        height: 1em;
        border: 1px solid currentColor;
        background: transparent;
        color: inherit;
        margin: 0 .25em;
        position: relative;
        padding: 0;
        line-height: 0;

        & svg path {
          stroke: currentColor;
          stroke-width: 1px;
        }

      }

    }

    & .delete-tab {

      font-size: inherit;
      padding: .25em .75em;
      cursor: default;
      display: inline-flex;
      align-items: center;
      flex-direction: row;

      border-bottom-left-radius: 5px;
      border-bottom-right-radius: 5px;

      /* border: 1px solid #ccc; */
      border-top-width: 0px;
      z-index: 1;
      margin-right: -2px; 
      /* margin-right: 1em; */

      svg {
        width: 1em;
        height: 1em;
        opacity: .5;
        pointer-events: none;
        transition: opacity .125s ease-in-out;
      }

      &:hover svg {
        opacity: .75;
      }

      path {
        stroke: currentColor;
        stroke-width: 1.5px;
        stroke-linecap: round;
      }

    }

    & .tab-bar-spacer {
      flex-grow: 1;
    }

    /** don't overflow/ellipsis the add tab button */

    /**
     * for ellipsis to work, it seems like it has to be inside
     * a span in the tab. since we are not using it atm I removed
     * that span, but if we want ellpisis it will need to come back.
     */

    & .tab {
      white-space: nowrap;
      /* text-overflow: ellipsis; */
      overflow-x: hidden;

      /*
      span {
        text-overflow: ellipsis;
        overflow-x: hidden;
 
      }
      */

    }

    & .tab.selected {
      z-index: 2;
    }

  }

}
